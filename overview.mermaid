graph TD
    %% èŠ‚ç‚¹å®šä¹‰
    UserLog([User Log])
    Meta((Meta.))
    Question((Question))
    Issue((Issue))
    Task((Task))
    Proposal((Proposal))
    PR([PR / Worktree])
    Repo[(Repo)]
    
    %% äººå·¥ä»‹å…¥èŠ‚ç‚¹æ ·å¼ (çº¢åœˆæ ‡è¯†)
    Tell<font color='red'>ğŸ”´ Tell</font>
    Ask<font color='red'>ğŸ”´ Ask</font>
    Verify<font color='red'>ğŸ”´ Verify</font>
    Apply<font color='red'>ğŸ”´ Apply</font>
    HIL<font color='red'>ğŸ”´ HIL Log</font>
    Clarity<font color='red'>ğŸ”´ Clarity Check</font>

    %% 1. è¾“å…¥ä¸å¯¹é½é˜¶æ®µ
    In((Start)) --> Tell
    Tell -- Input --> Meta
    Tell -- Logging --> UserLog
    
    Meta -- critic --> Question
    Question -- ask --> Ask
    Ask -- resolve --> Meta
    
    Meta -- self-check --> Clarity
    Clarity -- "If Vague" --> Question
    
    %% 2. å‘ç°é—®é¢˜ä¸å†³ç­–é˜¶æ®µ
    Meta -- audit/file --> Issue
    Meta -- suggest --> Proposal
    
    Issue -- "Confirm (verify)" --> Verify
    Proposal -- "Approve (verify)" --> Verify
    Verify --> Task
    
    %% 3. æ‰§è¡Œä¸å­æµç¨‹ (Work)
    Task -- "Work (Subflow)" --> PR
    PR -- apply --> Apply
    Apply -- merge --> Repo
    
    %% 4. åé¦ˆä¸åŒæ­¥é—­ç¯
    Repo -- sync --> Meta
    Task -- "Success/Update" --> HIL
    HIL -- "Feedback Loop" --> Meta

    %% æ ·å¼å®šä¹‰
    style Tell stroke:#ff0000,stroke-width:2px
    style Ask stroke:#ff0000,stroke-width:2px
    style Verify stroke:#ff0000,stroke-width:2px
    style Apply stroke:#ff0000,stroke-width:2px
    style Clarity stroke:#ff0000,stroke-width:2px
    style HIL stroke:#ff0000,stroke-width:2px
    style Meta fill:#f9f,stroke:#333,stroke-width:2px
    style Repo fill:#bbf,stroke:#333
    style PR fill:#eee,stroke-dasharray: 5 5